{% extends 'base.html' %}

{% block title %}Shift Rule{% endblock title %}

{% block content %}
<h2>Shift Rules</h2>
{% regroup object_list by shift_rule as rule_list %}
{% for rule in rule_list %}
    <h4>Shift: {{ rule.grouper.shift.shift_type }}  Rule: {{ rule.grouper }}
        <a href="{% url 'shift_rule_edit' rule.grouper.pk %}">Edit</a> | <a href="{% url 'shift_rule_delete' rule.grouper.pk %}">Delete</a>
    </h4>
        <ul>
            {% for shift_rule_role in rule.list %}
            <li>Role: {{ shift_rule_role.role }}, Count:{{ shift_rule_role.count }}
                <a href="{% url 'shift_rule_role_edit' shift_rule_role.pk %}">Edit</a> | <a href="{% url 'shift_rule_role_delete' shift_rule_role.pk %}">Delete</a>
            </li>
            {% endfor %}
        </ul>
{% endfor %}

<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>Shift</th>
            <th>Shift Rule Name</th>
            <th>Role</th>
            <th>Count</th>
            <th>Action</th>
        </tr>
    {% for shift_rule_role in object_list %}
    <tr>
        <td>{{ shift_rule_role.shift_rule.shift.shift_type }}</td>
        <td>{{ shift_rule_role.shift_rule.shift_rule_name }}</td>
        <td>{{ shift_rule_role.role }}</td>
        <td>{{ shift_rule_role.count }}</td>
        <td><a href="{% url 'shift_rule_role_edit' shift_rule_role.pk %}">Edit</a> | <a href="{% url 'shift_rule_role_delete' shift_rule_role.pk %}">Delete</a></td>
    </tr>
  {% endfor %}
</table>
<a href="{% url 'shift_rule_role_new' %}">Create New Shift Rule Role</a>
{% endblock content %}
